<link rel="stylesheet" href="css/quoteDetails.css">
<link rel="stylesheet" href="css/common-lg.css">
<style>
	.items{
		background-color: white !important;
	}
</style>
<div id="Loader" ng-show="Loading==true" ng-hide="Loading==false">
      <px-spinner size="100"></px-spinner>
</div>
<div ng-show="Loading==false" ng-hide="Loading==true">
	<px-card style="padding:1rem 1rem 2rem !important;">
		<div class="layout">
			<div class="layout__item pull--right">
				<div class="lt">
					<a href="/quotes" title="Back" class="btn btn-primary">Back</a>
				</div>
				<div class="rt">
					<a title="Details" id="CompleteDetails" class="btn" style="background-color:#60bd68;color:white" ng-click="completedetails = true;acceptbutton = true" ng-hide="acceptbutton" ng-disabled="rejectDetails">Complete the Details</a>
					<a title="Accept" id="AcceptButton" class="btn disabled" ng-show="acceptbutton" ng-click="acceptClicked()">Accept</a>
					<a title="Reject" id="RejectButton" style="background-color:#f15854;color:white" class="btn" ng-disabled="acceptDetails" ng-click="successMessage=false;rejectDetails = true;" ng-click="rejectBtnClicked()">Reject</a>
				</div>
			</div>
		</div>
    <div class="sucess_msg" ng-show="successMessage" style="margin-top:2% !important">
      <p>The Quote# {{QuoteNumber}} has been accepted successfully.</p>
    </div>
    <div id="RejectDiv2" class="reject_form" ng-show="AcknowledgeReject" style="margin-top:2% !important;margin-left:0 !important">
      <p style="color:#d9534f">The Quote# {{QuoteNumber}} has been rejected successfully.</p>
    </div>
  	<div id="RejectDiv" class="layout" ng-show="rejectDetails" style="margin-top:2% !important;margin-left:0 !important">
  		<div class="layout__item reject_form">
  			<table>
  				<tr>
  					<td class="label_td"><label for="cmnt"><i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i>&nbsp;Comments:</td>
  					<td><input id="cmnt" class="ForRejection" ng-model="comments"></input></td>
  				</tr>
  				<tr>
  					<td class="label_td"><i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i>&nbsp;Supporting Documents</br>(Upload in pdf format Only):</td>
  					<td>
  						<input type="file"  class="ForRejection" name="" file-input="files"/>
  					</td>
  				</tr>
  			</table>
  			<div class="clearfix">
  				<button type="submit" class="form-field--inline btn disabled rt" ng-click="rejectClicked()">Reject Quote</button>
					<i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i> <span style="font-size:12px">Mandatory Fields</span>
  			</div>
  		</div>
  	</div>

		<h1 class="Quoteheading">QUOTE#&nbsp;:&nbsp;{{QuoteNumber}}</h1>
		<div class="layout">
			<div class="layout__item pull--right">
				<div class="lt">
					<table class="summaryTable" style="line-height:0.5">
						<tr>
							<th style="background-color:#b6c3cc">Version</th>
							<th style="font-weight:normal">{{QuoteVersion}}</th>
						</tr>
						<tr>
							<td style="background-color:#b6c3cc;font-weight:bold">Date</td>
							<td>{{QuoteDate | date : 'mediumDate'}}</td>
						</tr>
						<tr>
							<td style="background-color:#b6c3cc;font-weight:bold">Status</td>
							<td> <span ng-class="QuoteStatus == 'accepted' ? status_accept : QuoteStatus == 'status_reject' ? status_reject : status_pending"></span> {{QuoteStatus}}</td>
						</tr>
					</table>
				</div>
				<div class="rt">
					<p style="border-bottom:2px red solid">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Total Quote Net Selling Price: &nbsp;&nbsp;&nbsp;&nbsp;
						<strong style="font-size:2rem">{{totalSP | currency : currency1+'&nbsp;' : 2}}</strong>
					</p>
				</div>
			</div>
		</div>
    <div class="layout" style="border-top:1px solid #8f9ca4;border-bottom:1px solid #8f9ca4">
  		<!-- <div class="layout__item desk-25 small-100 cust_det clearfix" style="border-right:1px solid #8f9ca4;">
  			<div class="lt">
  				<h4>Customer</h4>
  				<p></p>
  				<p></p>
  				<p></p>
  			</div>
  		</div> -->
  		<div class="layout__item desk-50 small-100 cust_det clearfix" style="border-right:1px solid #8f9ca4;">
        <div class="lt">
  				<h4>Ship To</h4>
  				<p>{{ShipToAddress1}} , {{ShipToAddress2}}</p>
          <p>{{ShipToAddress3}}</p>
  				<p>{{ShipToCity}} , {{ShipToCountry}} , {{ShipToPostalCode}} {{ShipToProvince}} {{ShipToState}}</p>
  			</div>
  		</div>
      <div class="layout__item desk-50 small-100 cust_det clearfix">
        <div class="lt" ng-show="completedetails">
  				<h4><i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i>&nbsp;Bill To</h4>
          <input  class="MandatoryFields" ng-show="completedetails" id="billTo" style="width:440px;height:100px" ng-model="BillTo" required></input>
  			</div>
  		</div>
  	</div>

    <div class="layout" style="border-bottom:1px solid #8f9ca4">
      <div class="layout__item desk-50 small-100 cust_det clearfix">
      <div class="lt">
        <h4>Terms</h4>
        <table>
          <tr>
            <td><h4>Governing Agreement</h4></td>
            <td><b>:</b>&nbsp;&nbsp;{{custName}}</td>
          </tr>
          <tr>
            <td><h4>Terms of Delivery</h4></td>
            <td><b>:</b>&nbsp;&nbsp;{{DeliveryTerms}}</td>
          </tr>
          <tr>
            <td><h4>Billing Terms</h4></td>
            <td><b>:</b>&nbsp;&nbsp;{{BillingTerms}}</td>
          </tr>
          <tr>
            <td><h4>Payment Terms</h4></td>
            <td><b>:</b>&nbsp;&nbsp;{{paymentTerms}}</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="layout__item desk-50 small-100 cust_det clearfix">
      <div class="">
        <h4></h4>
        <table>
          <tr>
            <td class="label_td"><label for="poNum"><i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i>&nbsp;PO Number</label></td>
            <td><input class="MandatoryFields" ng-show="completedetails" style="width:440px" class="form-field--inline text-input input--tiny form-control" ng-model="PONumber" id="poNum" type="text" placeholder="" required></td>
          </tr>
          <tr>
            <td class="label_td" ng-show="completedetails"><i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i>&nbsp;PO:</td>
            <td>
							<form name="uploadDoc">
								<input class="MandatoryFields" ng-show="completedetails" type="file" id="uploadDoc" file-input="files"/>
							</form>
            </td>
          </tr>
        </table>
      </div>
			<div class="adr_div clearfix"  ng-show="completedetails">
				<i style="color: #fb1c1c;vertical-align: super;font-size: 8px;" class="fa fa-asterisk" aria-hidden="true"></i> <span style="font-size:12px">Mandatory Fields</span>
			</div>
    </div>
  </div>
  <!-- <h4>Summary</h4> -->
  <!-- <px-data-table table-data='{{partsList}}' language="en" table-rows="true" include-all-columns="true" hide-pagination-control="true" class="items">
    <px-data-table-column name="srno" Label="#"></px-data-table-column>
    <px-data-table-column name="qty" label="Qty" class="items"></px-data-table-column>
    <px-data-table-column name="desc" label="Description" class="items"></px-data-table-column>
    <px-data-table-column name="cPrice" label="Ext Contract Price" class="items"></px-data-table-column>
    <px-data-table-column name="disc" label="Discount" class="items"></px-data-table-column>
    <px-data-table-column name="sPrice" label="Ext Sell Price" class="items"></px-data-table-column>
  </px-data-table> -->

  <div class="layout block">
    <div class="layout__item">
      <table class="QuoteSummaryTable">
        <tr>
          <td style="padding-bottom:10px !important;padding-top:10px !important;font-weight:bold">Quote Summary</td>
          <td></td>
        </tr>
        <tr>
          <td><p>1. &nbsp;&nbsp;<strong>Total Contract List Price  </strong></p></td>
          <td><b>:</b>&nbsp;&nbsp;{{totalLP | currency : currency1+'&nbsp;' : 2}}</td>
        </tr>
        <tr>
          <td><p>2. &nbsp;&nbsp;<strong>Total Quote Discount  </strong></p></td>
          <td><b>:</b>&nbsp;&nbsp;{{totalDisc | currency : currency1+'&nbsp;' : 2}}</td>
        </tr>
        <tr>
          <td><p>3. &nbsp;&nbsp;<strong>Total Extended Selling Price  </strong></p></td>
          <td><b>:</b>&nbsp;&nbsp;{{totalSP | currency : currency1+'&nbsp;' : 2}}</td>
        </tr>
        <tr>
          <td><p>4. &nbsp;&nbsp;<strong>Total Quote Net Selling Price  </strong></p></td>
          <td><b>:</b>&nbsp;&nbsp;{{totalSP | currency : currency1+'&nbsp;' : 2}}</td>
        </tr>
      </table>
    </div>
  </div>

  <h4>Item Details</h4>
  <px-data-table table-data='{{itemDetails}}' language="en" table-rows="true" include-all-columns="true" hide-pagination-control="true">
    <px-data-table-column name="srno" Label="#" class="items"></px-data-table-column>
    <px-data-table-column name="qty" label="Quantity" class="items"></px-data-table-column>
    <px-data-table-column name="itemNo" label="Item#" class="items"></px-data-table-column>
    <px-data-table-column name="desc" label="Description" class="items"></px-data-table-column>
    <px-data-table-column name="cPrice" label="Extended Contract Price" class="items"></px-data-table-column>
    <px-data-table-column name="disc" label="Discount Percentage" class="items"></px-data-table-column>
    <px-data-table-column name="sPrice" label="Extended Sell Price" class="items"></px-data-table-column>
  </px-data-table>

  <div class="layout block">
    <div class="layout__item">
      <table>
        <tr>
          <td style="padding-bottom:10px !important;padding-top:10px !important;font-weight:bold">Support Documents</td>
        </tr>
				<tr ng-show="docFlag" ng-repeat = "document in supporting_documents">
					<td>{{$index+1}}. &nbsp;&nbsp;<a target="_blank" href="" ng-click="displayFile(document.url)">{{document.description}}</a></td>
				</tr>
				<tr ng-show="!docFlag">
					<td>No documents related to this Quote</td>
				</tr>
      </table>
    </div>
  </div>

	</px-card>
</div>
